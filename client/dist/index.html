<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link href="/style.e308ff8e.css" rel="stylesheet">
  <link href="/modal.style.dd14f33e.css" rel="stylesheet">
  <title>E-Diary</title>
<script src="/style.e308ff8e.js"></script><script src="/modal.style.dd14f33e.js"></script></head>
<body ng-cloak="" ng-app="diaryApp" ng-controller="diaryController as vm">
    <header class="header">
      <div class="header__logo">
          <i class="fab fa-angrycreative fa-4x"></i>
      </div>
      <input type="text" class="search header__search " placeholder="Поиск" ng-model="vm.searchString" ng-change="vm.search()">
      <div class="add-record header__item-count">
        <button class="add-record__button" ng-click="vm.addRecord()">
          <i class="fas fa-plus fa-2x"></i>
        </button>
        <div class="record-count">{{vm.records.length}}</div>
        <i class="fas fa-flag fa-2x"></i>
      </div>
    </header>

    <main class="main">
        <aside class="side-bar">
            <ul class="categories">
                <li class="category" ng-repeat="category in vm.categories" ng-style="vm.setColor(category.color)" ng-click="vm.filter(category)">{{category.name}}</li>
            </ul>
          </aside>
      <section class="content">
          <article class="record" ng-repeat="record in vm.records">
              <h1 class="headline">
                  {{record.title}}
              </h1>
              <a class="edit__record">
                  <i class="fas fa-trash-alt fa-2x" ng-click="vm.deleteRecord(record)"></i>
                  <i class="fas fa-edit fa-2x" ng-click="vm.updateRecord(record)"></i>
              </a>
              <section class="description">
                <p>{{record.description}}</p>
              </section>
              <footer class="info">
                  <span class="category" ng-repeat="category in record.categories track by $index" ng-style="vm.setSelectedColor(category)">{{category.name}}</span>  
                  <time class="record-date">{{record.date | date:'yyyy-MM-dd HH:mm:ss'}}</time>
              </footer>
          </article>
      </section>
    </main>
    <div id="myModal" class="modal">
        <!-- Modal content -->
        <div class="modal-content">
          <form ng-submit="vm.sendRecord()">
          <span class="close" ng-click="vm.closeModal()">&times;</span>
          <input type="text" name="title" class="title" placeholder="Заголовок" ng-model="vm.record.title" required="">
          <textarea type="text" name="record" placeholder="Мои мысли..." ng-model="vm.record.description" required=""></textarea>
          <!-- <div class="additionally">
              <select class="select-categories"ng-model="vm.record.categories" multiple>
                <option selected hidden>{{vm.selectedCategory}}</option>
                <option class="category select__category" ng-repeat="category in vm.categories" ng-style="vm.setColor(category.color)">{{category.name}}</option>
              </select>
          </div> -->
          <div class="categories-block">
            <div>
              <ul class="categories modal__categories">
                <li class="category" ng-repeat="category in vm.listOfCategories track by $index" ng-style="vm.setColor(category.color)" ng-click="vm.addCategory(category)">{{category.name}}</li>
            </ul>
            </div>
            <div>
              <ul class="categories modal__categories">
                <li class="category" ng-repeat="category in vm.record.categories track by $index" ng-style="vm.setColor(category.color)" ng-click="vm.removeCategory(category)">{{category.name}}</li>
            </ul>
            </div>
          </div>


          <input type="submit" class="add" value="Добавить">
        </form>
        </div>
      </div>
</body>
  <script src="/index.controller.6445e92b.js"></script>
  <script src="https://kit.fontawesome.com/ea91dc23bc.js"></script>
</html>

